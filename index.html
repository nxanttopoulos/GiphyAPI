<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Favorite Animal Giphy</title>
  <style type="text/css">
    h1{
      margin:auto;
      text-align:center;
    }
    button,
    div,
    h3,
    form,
    input {
      margin: 7.5px;
    }
    #picture-view {
      display: flex;   
      flex-wrap: wrap;
      height:600px;
    }
    html {
      background:rgba(150,150,160,0.5);
    }
    .gif {
      height: 200px;
      width: 200px;
    }
  </style>
  <script src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
</head>
<body>
  <div class="container">
    <h1>Giphy Search</h1>
    <div id="giphy-view"></div>
    <div id="buttons-view"></div>
    <form id="giphy-form">
      <label for="giphy-input">Add an Animal Giphy</label>
      <input type="text" id="giphy-input"><br>
      <input id="add-giphy" type="submit" value="Add a Giphy">
      <div id="picture-view"></div>
      <div id="rating-view"></div>
    </form>
  </div>
  <script type="text/javascript">
   
      var topics = ["dog", "cat", "rabbit", "hamster", "skunk", "goldfish", "bird","ferret","sugar glider","turtle","chinchilla","hedgehog","hermit crab","gerbil","pygmy goat","chicken","capybara","teacup pig","salamander","frog"];

      function displayGiphyInfo() {
        var giphy = $(this).attr("data-name");
        var queryURL = "https://api.giphy.com/v1/gifs/search?q=" + giphy + "&api_key=dc6zaTOxFJmzC&rating!=r&limit=10";
        $.ajax({
          url: queryURL,
          method: "GET"
        }).done(function(response) {
          var data = response.data;
          $("#picture-view").empty();
            for (var i=0; i < data.length; i++) {
            $("#picture-view").append("<img src="+data[i].images.fixed_height_still.url +" class='gif' data-state='still' data-animate='"+data[i].images.fixed_height_downsampled.url+"' data-still='"+data[i].images.fixed_height_still.url+"'></img><p>rating: " + data[i].rating + "</p>");
            }
          $(".gif").on("click", function()  {
            var state = $(this).attr("data-state");
            if (state === "still") {
              var animate_url = $(this).attr("data-animate");
              $(this).attr("src", animate_url);
              $(this).attr("data-state", "animate");
            } else {
              var still_url = $(this).attr("data-still");
              $(this).attr("src", still_url);
              $(this).attr("data-state", "still");
            }
          });
        });
      }

      function renderButtons() {
        $("#giphy-view").empty();
        for (var i = 0; i < topics.length; i++) {
          var buttons = $("<button>");
          buttons.addClass("giphy");
          buttons.attr("data-name", topics[i]);
          buttons.text(topics[i]);
          $("#giphy-view").append(buttons);
        }
      }
    
      $("#add-giphy").on("click", function(event) {
        event.preventDefault();
        var giphy = $("#giphy-input").val().trim();
        topics.push(giphy);
        renderButtons();
      });
      
      $(document).on("click", ".giphy", displayGiphyInfo);
      
      renderButtons();
      
  </script>
</body>
</html>